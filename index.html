<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Doctor - Advanced Virtual Health Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00d2ff;
            --secondary: #3a7bd5;
            --dark: #121212;
            --darker: #0a0a0a;
            --light: #f8f9fa;
            --danger: #ff4757;
            --success: #2ed573;
            --warning: #ffa502;
            --glass: rgba(255, 255, 255, 0.05);
            --neon-glow: 0 0 10px rgba(0, 210, 255, 0.8);
            --transition: all 0.3s ease;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.2);
            --border-radius-sm: 8px;
            --border-radius-md: 12px;
            --border-radius-lg: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
            transition: var(--transition);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(58, 123, 213, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 210, 255, 0.1) 0%, transparent 20%);
            line-height: 1.6;
        }

        body.light-mode {
            background-color: var(--light);
            color: var(--dark);
            --glass: rgba(0, 0, 0, 0.05);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            padding: 20px 0;
            border-bottom: 1px solid var(--glass);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: rgba(18, 18, 18, 0.9);
            box-shadow: var(--shadow-sm);
        }

        body.light-mode header {
            background-color: rgba(248, 249, 250, 0.9);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-2px);
        }

        .logo i {
            font-size: 1.8rem;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            font-size: 1rem;
        }

        body.light-mode .nav-links a {
            color: var(--dark);
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border-radius: var(--border-radius-lg);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: var(--neon-glow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.6);
            background: linear-gradient(135deg, var(--secondary), var(--primary));
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.2rem;
            cursor: pointer;
            margin-left: 10px;
            transition: var(--transition);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        body.light-mode .theme-toggle {
            color: var(--dark);
        }

        body.light-mode .theme-toggle:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        /* Hero Section */
        .hero {
            padding: 100px 0 60px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(0, 210, 255, 0.05) 0%, transparent 70%);
            z-index: -1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 40px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
        }

        body.light-mode .hero p {
            color: rgba(0, 0, 0, 0.8);
        }

        .hero-image {
            max-width: 600px;
            margin: 40px auto;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .hero-image:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .hero-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        /* Symptoms Selector */
        .symptoms-selector {
            max-width: 900px;
            margin: 0 auto 40px;
            background: var(--glass);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .symptoms-selector:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        body.light-mode .symptoms-selector {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .symptoms-selector h3 {
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .symptom-tag {
            background: rgba(0, 210, 255, 0.1);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 10px 15px;
            border-radius: var(--border-radius-lg);
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 45px;
        }

        .symptom-tag:hover {
            background: rgba(0, 210, 255, 0.2);
            transform: translateY(-2px);
        }

        .symptom-tag.selected {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 10px rgba(0, 210, 255, 0.5);
        }

        .search-symptoms {
            margin-top: 15px;
            position: relative;
        }

        .search-symptoms input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--light);
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-symptoms input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 210, 255, 0.2);
        }

        .search-symptoms i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
        }

        body.light-mode .search-symptoms i {
            color: rgba(0, 0, 0, 0.6);
        }

        /* Chatbot Section */
        .chatbot-section {
            padding: 80px 0;
            background: radial-gradient(circle at 50% 0%, rgba(58, 123, 213, 0.05) 0%, transparent 30%);
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
        }

        .chatbot-container {
            background: var(--glass);
            border-radius: var(--border-radius-lg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: 900px;
            margin: 0 auto;
            transition: var(--transition);
        }

        .chatbot-container:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
        }

        body.light-mode .chatbot-container {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .chatbot-header {
            padding: 15px 25px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .chatbot-header h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .language-toggle {
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 6px 15px;
            border-radius: var(--border-radius-lg);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .lang-btn.active {
            background: white;
            color: var(--secondary);
            font-weight: 600;
        }

        .chatbot-messages {
            height: 450px;
            overflow-y: auto;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }

        .chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chatbot-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chatbot-messages::-webkit-scrollbar-thumb {
            background-color: var(--primary);
            border-radius: 3px;
        }

        .message {
            max-width: 85%;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.6;
            position: relative;
            animation: fadeIn 0.3s ease;
            font-size: 0.95rem;
            box-shadow: var(--shadow-sm);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            align-self: flex-start;
            background: var(--glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom-left-radius: 5px;
        }

        body.light-mode .bot-message {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .typing-indicator {
            display: inline-flex;
            gap: 5px;
            align-items: center;
            padding: 12px 18px;
            background: var(--glass);
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.light-mode .typing-indicator {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(18, 18, 18, 0.5);
            align-items: center;
        }

        body.light-mode .chatbot-input {
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            background: rgba(248, 249, 250, 0.5);
        }

        .chatbot-input input {
            flex: 1;
            padding: 12px 15px;
            border-radius: var(--border-radius-lg);
            border: none;
            background: var(--glass);
            color: var(--light);
            font-size: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        body.light-mode .chatbot-input input {
            color: var(--dark);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .chatbot-input input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 210, 255, 0.2);
        }

        .voice-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.2rem;
            margin-left: 10px;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-btn:hover {
            background: rgba(0, 210, 255, 0.1);
            color: var(--secondary);
        }

        .voice-btn.listening {
            color: var(--danger);
            animation: pulse 1.5s infinite;
            background: rgba(255, 71, 87, 0.1);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .send-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .send-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Results Section */
        .results-section {
            padding: 80px 0;
            background: radial-gradient(circle at 50% 100%, rgba(58, 123, 213, 0.05) 0%, transparent 30%);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .result-card {
            background: var(--glass);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .result-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .result-card h3 i {
            font-size: 1.3rem;
        }

        .result-content {
            line-height: 1.6;
            flex-grow: 1;
            font-size: 0.95rem;
        }

        .medicine-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }

        body.light-mode .medicine-item {
            border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
        }

        .medicine-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .medicine-name {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.05rem;
        }

        .medicine-details {
            margin-top: 8px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        body.light-mode .medicine-details {
            color: rgba(0, 0, 0, 0.7);
        }

        .medicine-warning {
            color: var(--warning);
            font-size: 0.85rem;
            margin-top: 8px;
            display: flex;
            align-items: flex-start;
            gap: 5px;
        }

        .medicine-warning i {
            font-size: 0.9rem;
        }

        .confidence-meter {
            margin-top: 15px;
        }

        .confidence-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }

        body.light-mode .confidence-bar {
            background: rgba(0, 0, 0, 0.1);
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .confidence-value {
            font-size: 0.9rem;
            color: var(--primary);
            margin-top: 5px;
            font-weight: 500;
        }

        .diagnosis-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }
        
        body.light-mode .diagnosis-item {
            border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
        }
        
        .diagnosis-name {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.05rem;
        }
        
        .diagnosis-confidence {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
        }
        
        body.light-mode .diagnosis-confidence {
            color: rgba(0, 0, 0, 0.7);
        }
        
        .precaution-item {
            margin-bottom: 10px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }
        
        .precaution-item::before {
            content: '•';
            color: var(--primary);
            font-size: 1.2rem;
            line-height: 1;
        }

        /* Health Tips Section */
        .health-tips {
            padding: 80px 0;
            background: rgba(0, 0, 0, 0.1);
            margin-top: 60px;
            position: relative;
            overflow: hidden;
        }

        .health-tips::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 70% 30%, rgba(0, 210, 255, 0.05) 0%, transparent 40%);
            z-index: -1;
        }

        body.light-mode .health-tips {
            background: rgba(0, 0, 0, 0.03);
        }

        .tips-container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--glass);
            border-radius: var(--border-radius-lg);
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .tips-container:hover {
            box-shadow: var(--shadow-lg);
        }

        body.light-mode .tips-container {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .tips-container h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .tips-list {
            list-style-type: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .tip-item {
            margin-bottom: 15px;
            padding-left: 25px;
            position: relative;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .tip-item::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--primary);
            font-size: 1.8rem;
            line-height: 0.8;
        }

        /* Emergency Section */
        .emergency-section {
            padding: 60px 0;
            text-align: center;
            background: radial-gradient(circle at 30% 50%, rgba(255, 71, 87, 0.1) 0%, transparent 40%);
        }

        .emergency-card {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid var(--danger);
            border-radius: var(--border-radius-lg);
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.2);
            transition: var(--transition);
        }

        .emergency-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.3);
        }

        .emergency-card h3 {
            color: var(--danger);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.5rem;
        }

        .emergency-card p {
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.9);
        }

        body.light-mode .emergency-card p {
            color: rgba(0, 0, 0, 0.8);
        }

        .emergency-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            box-shadow: 0 2px 5px rgba(255, 71, 87, 0.3);
            margin-top: 10px;
        }

        .emergency-btn:hover {
            background: #ff6b81;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 71, 87, 0.3);
        }

        /* Features Section */
        .features-section {
            padding: 80px 0;
            background: radial-gradient(circle at 50% 0%, rgba(46, 213, 115, 0.05) 0%, transparent 30%);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            background: var(--glass);
            border-radius: var(--border-radius-lg);
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            text-align: center;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--success);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            background: rgba(0, 210, 255, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
            margin-right: auto;
            transition: var(--transition);
        }

        .feature-card:hover .feature-icon {
            background: rgba(0, 210, 255, 0.2);
            transform: scale(1.1);
        }

        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.3rem;
        }

        .feature-card p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
        }

        body.light-mode .feature-card p {
            color: rgba(0, 0, 0, 0.7);
        }

        /* Footer */
        footer {
            padding: 60px 0 30px;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 60px;
            background: var(--darker);
        }

        body.light-mode footer {
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            background: #f0f0f0;
        }

        .footer-logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            display: inline-block;
            transition: var(--transition);
        }

        .footer-logo:hover {
            transform: translateY(-3px);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--light);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.95rem;
            position: relative;
        }

        body.light-mode .footer-links a {
            color: var(--dark);
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-links a::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--primary);
            transition: var(--transition);
        }

        .footer-links a:hover::after {
            width: 100%;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .social-links a {
            color: var(--light);
            font-size: 1.5rem;
            transition: var(--transition);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
        }

        body.light-mode .social-links a {
            color: var(--dark);
            background: rgba(0, 0, 0, 0.05);
        }

        .social-links a:hover {
            color: var(--primary);
            transform: translateY(-3px);
            background: rgba(0, 210, 255, 0.1);
        }

        .copyright {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 20px;
        }

        body.light-mode .copyright {
            color: rgba(0, 0, 0, 0.7);
        }

        /* Loading Animation */
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 210, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--darker);
            color: var(--light);
            text-align: center;
            border-radius: var(--border-radius-sm);
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 3rem;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
            
            .chatbot-messages {
                height: 400px;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .nav-links {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .auth-buttons {
                width: 100%;
                justify-content: center;
            }

            .hero {
                padding: 80px 0 40px;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .symptoms-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }

            .chatbot-messages {
                height: 350px;
                padding: 20px;
            }

            .message {
                max-width: 90%;
                padding: 12px 16px;
            }

            .tips-container {
                padding: 30px 20px;
            }

            .tips-list {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .symptoms-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .chatbot-input {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }

            .chatbot-input input {
                width: 100%;
                margin-bottom: 5px;
            }

            .voice-btn, .send-btn {
                align-self: flex-end;
            }

            .results-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .feature-card {
                padding: 25px 20px;
            }

            .footer-links {
                gap: 15px;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .slide-up {
            animation: slideUp 0.5s ease forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Pulse Animation */
        .pulse {
            animation: pulse 2s infinite;
        }

        /* Floating Animation */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <i class="fas fa-robot"></i>
                    <span>Umer AI Doctor</span>
                </a>
                <nav class="nav-links">
                    <a href="#">Home</a>
                    <a href="#chatbot">Chat</a>
                    <a href="#results">Results</a>
                    <a href="#tips">Health Tips</a>
                    <a href="#features">Features</a>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-outline">Login</button>
                    <button class="btn btn-primary">Sign Up</button>
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1 class="slide-up">Your Personal AI Health Assistant</h1>
            <p class="slide-up" style="animation-delay: 0.2s">Get instant medical advice, accurate disease predictions, and personalized treatment recommendations powered by advanced AI technology.</p>
            
            <div class="hero-buttons slide-up" style="animation-delay: 0.4s">
                <button class="btn btn-primary" id="startChatBtn">
                    <i class="fas fa-comment-medical"></i> Start Chat
                </button>
                <button class="btn btn-outline" id="learnMoreBtn">
                    <i class="fas fa-info-circle"></i> Learn More
                </button>
            </div>
            
            <div class="hero-image slide-up" style="animation-delay: 0.6s">
                <img src="https://img.freepik.com/free-vector/medical-assistant-robot-concept-illustration_114360-10052.jpg" alt="AI Doctor Assistant">
            </div>
        </div>
    </section>

    <section class="features-section" id="features">
        <div class="container">
            <h2 class="section-title">Key Features</h2>
            
            <div class="features-grid">
                <div class="feature-card fade-in" style="animation-delay: 0.1s">
                    <div class="feature-icon">
                        <i class="fas fa-stethoscope"></i>
                    </div>
                    <h3>Symptom Analysis</h3>
                    <p>Our AI analyzes your symptoms with medical knowledge to provide accurate potential diagnoses.</p>
                </div>
                
                <div class="feature-card fade-in" style="animation-delay: 0.2s">
                    <div class="feature-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <h3>Medicine Recommendations</h3>
                    <p>Get personalized medication suggestions with proper dosages and precautions.</p>
                </div>
                
                <div class="feature-card fade-in" style="animation-delay: 0.3s">
                    <div class="feature-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <h3>Multilingual Support</h3>
                    <p>Communicate in English or Urdu for better understanding and comfort.</p>
                </div>
                
                <div class="feature-card fade-in" style="animation-delay: 0.4s">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Health Tips</h3>
                    <p>Receive AI-generated health recommendations to improve your wellbeing.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="chatbot-section" id="chatbot">
        <div class="container">
            <h2 class="section-title">AI Doctor Chat</h2>
            
            <div class="symptoms-selector">
                <h3><i class="fas fa-clipboard-list"></i> Common Symptoms</h3>
                <p>Select your symptoms to help the AI diagnose your condition more accurately:</p>
                
                <div class="search-symptoms">
                    <i class="fas fa-search"></i>
                    <input type="text" id="symptomSearch" placeholder="Search symptoms...">
                </div>
                
                <div class="symptoms-grid" id="symptomsGrid">
                    <!-- Symptoms will be added by JavaScript -->
                </div>
            </div>
            
            <div class="chatbot-container">
                <div class="chatbot-header">
                    <h3><i class="fas fa-robot"></i> AI Doctor</h3>
                    <div class="language-toggle">
                        <button class="lang-btn active" id="englishBtn">English</button>
                        <button class="lang-btn" id="urduBtn">اردو</button>
                    </div>
                </div>
                <div class="chatbot-messages" id="chatMessages">
                    <div class="message bot-message">
                        Hello! I'm your AI Doctor. Please describe your symptoms in detail, and I'll help diagnose your condition and recommend appropriate treatment. You can also select symptoms from the list above.
                    </div>
                </div>
                <div class="chatbot-input">
                    <input type="text" id="userInput" placeholder="Describe your symptoms here...">
                    <button class="voice-btn tooltip" id="voiceBtn">
                        <i class="fas fa-microphone"></i>
                        <span class="tooltiptext">Voice Input</span>
                    </button>
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="results-section" id="results">
        <div class="container">
            <h2 class="section-title">Diagnosis Results</h2>
            <div class="results-grid">
                <div class="result-card">
                    <h3><i class="fas fa-diagnoses"></i> Predicted Condition</h3>
                    <div class="result-content" id="diagnosisResult">
                        Describe your symptoms to get a diagnosis.
                        <div class="confidence-meter" id="confidenceMeter" style="display: none;">
                            <div>Confidence level:</div>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill"></div>
                            </div>
                            <div class="confidence-value" id="confidenceValue"></div>
                        </div>
                    </div>
                </div>
                <div class="result-card">
                    <h3><i class="fas fa-pills"></i> Recommended Medicine</h3>
                    <div class="result-content" id="medicineResult">
                        Medicine recommendations will appear here.
                    </div>
                </div>
                <div class="result-card">
                    <h3><i class="fas fa-shield-alt"></i> Precautions</h3>
                    <div class="result-content" id="precautionsResult">
                        Precautionary measures will be suggested here.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="health-tips" id="tips">
        <div class="container">
            <div class="tips-container">
                <h2><i class="fas fa-lightbulb"></i> AI-Generated Health Tips</h2>
                <ul class="tips-list" id="healthTips">
                    <li class="tip-item">Stay hydrated by drinking at least 8 glasses of water daily.</li>
                    <li class="tip-item">Get 7-9 hours of quality sleep each night for optimal health.</li>
                    <li class="tip-item">Exercise for at least 30 minutes most days of the week.</li>
                    <li class="tip-item">Eat a balanced diet rich in fruits, vegetables, and whole grains.</li>
                    <li class="tip-item">Manage stress through meditation or deep breathing exercises.</li>
                    <li class="tip-item">Wash your hands regularly to prevent the spread of germs.</li>
                    <li class="tip-item">Limit processed foods and added sugars in your diet.</li>
                    <li class="tip-item">Schedule regular health check-ups with your doctor.</li>
                </ul>
            </div>
        </div>
    </section>

    <section class="emergency-section">
        <div class="container">
            <div class="emergency-card">
                <h3><i class="fas fa-exclamation-triangle"></i> Emergency Notice</h3>
                <p>If you're experiencing severe symptoms like chest pain, difficulty breathing, or sudden weakness, please seek immediate medical attention.</p>
                <p>This AI assistant is not a substitute for professional medical care in emergencies.</p>
                <button class="emergency-btn" id="emergencyBtn">
                    <i class="fas fa-phone-alt"></i> Call Emergency Services
                </button>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <a href="#" class="footer-logo">AI Doctor</a>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact Us</a>
                <a href="#">FAQs</a>
                <a href="#">About</a>
            </div>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin-in"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
            <p class="copyright">© 2023 AI Doctor. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const englishBtn = document.getElementById('englishBtn');
        const urduBtn = document.getElementById('urduBtn');
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const voiceBtn = document.getElementById('voiceBtn');
        const diagnosisResult = document.getElementById('diagnosisResult');
        const medicineResult = document.getElementById('medicineResult');
        const precautionsResult = document.getElementById('precautionsResult');
        const healthTips = document.getElementById('healthTips');
        const symptomsGrid = document.getElementById('symptomsGrid');
        const emergencyBtn = document.getElementById('emergencyBtn');
        const confidenceMeter = document.getElementById('confidenceMeter');
        const confidenceFill = document.getElementById('confidenceFill');
        const confidenceValue = document.getElementById('confidenceValue');
        const symptomSearch = document.getElementById('symptomSearch');
        const startChatBtn = document.getElementById('startChatBtn');
        const learnMoreBtn = document.getElementById('learnMoreBtn');
    
        // App State
        let isEnglish = true;
        let isListening = false;
        let recognition;
        let selectedSymptoms = [];
        let allSymptoms = [];
        
        // Common medicines database (fallback if API fails)
        const commonMedicines = {
            "cold": [
                { 
                    name: "Paracetamol", 
                    dose: "500mg", 
                    frequency: "Every 6-8 hours", 
                    purpose: "For fever and pain relief",
                    warning: "Do not exceed 4 doses in 24 hours"
                },
                { 
                    name: "Chlorpheniramine", 
                    dose: "4mg", 
                    frequency: "Every 4-6 hours", 
                    purpose: "For runny nose and sneezing",
                    warning: "May cause drowsiness"
                }
            ],
            "cough": [
                { 
                    name: "Dextromethorphan", 
                    dose: "10-20mg", 
                    frequency: "Every 4-8 hours", 
                    purpose: "For dry cough",
                    warning: "Do not use with MAO inhibitors"
                },
                { 
                    name: "Guaifenesin", 
                    dose: "200-400mg", 
                    frequency: "Every 4 hours", 
                    purpose: "For chesty cough with mucus",
                    warning: "Drink plenty of water"
                }
            ],
            "fever": [
                { 
                    name: "Ibuprofen", 
                    dose: "200-400mg", 
                    frequency: "Every 6-8 hours", 
                    purpose: "For fever and pain relief",
                    warning: "Take with food to avoid stomach upset"
                },
                { 
                    name: "Paracetamol", 
                    dose: "500mg", 
                    frequency: "Every 6-8 hours", 
                    purpose: "For fever and pain relief",
                    warning: "Do not exceed 4 doses in 24 hours"
                }
            ],
            "headache": [
                { 
                    name: "Paracetamol", 
                    dose: "500mg", 
                    frequency: "Every 6-8 hours", 
                    purpose: "Pain relief",
                    warning: "Do not exceed 4 doses in 24 hours"
                },
                { 
                    name: "Ibuprofen", 
                    dose: "200-400mg", 
                    frequency: "Every 6-8 hours", 
                    purpose: "Pain and inflammation relief",
                    warning: "Take with food to avoid stomach upset"
                }
            ],
            "diarrhea": [
                { 
                    name: "Loperamide", 
                    dose: "2mg after each loose stool", 
                    frequency: "Maximum 8mg in 24 hours", 
                    purpose: "To control diarrhea",
                    warning: "Not for use in bacterial infections"
                },
                { 
                    name: "Oral Rehydration Solution", 
                    dose: "As needed", 
                    frequency: "After each loose stool", 
                    purpose: "Prevent dehydration",
                    warning: "Continue even if vomiting occurs"
                }
            ]
        };
        
        // Initialize the app
        function initApp() {
            setupThemeToggle();
            setupLanguageToggle();
            populateSymptoms();
            setupChat();
            setupEventListeners();
            observeAnimations();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            emergencyBtn.addEventListener('click', () => {
                if (isEnglish) {
                    alert('Please call your local emergency number (e.g., 911 or 112) for immediate assistance.');
                } else {
                    alert('براہ کرم فوری مدد کے لیے اپنا مقامی ایمرجنسی نمبر (مثال کے طور پر 112 یا 15) کال کریں۔');
                }
            });
            
            startChatBtn.addEventListener('click', () => {
                document.getElementById('chatbot').scrollIntoView({ behavior: 'smooth' });
                userInput.focus();
            });
            
            learnMoreBtn.addEventListener('click', () => {
                document.getElementById('features').scrollIntoView({ behavior: 'smooth' });
            });
            
            symptomSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const symptoms = document.querySelectorAll('.symptom-tag');
                
                symptoms.forEach(symptom => {
                    const text = symptom.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        symptom.style.display = 'flex';
                    } else {
                        symptom.style.display = 'none';
                    }
                });
            });
        }
        
        // Observe animations when elements come into view
        function observeAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.feature-card, .result-card, .tips-container').forEach(card => {
                observer.observe(card);
            });
        }
    
        // Theme Toggle
        function setupThemeToggle() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                const icon = themeToggle.querySelector('i');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
    
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('light-mode');
                const icon = themeToggle.querySelector('i');
                
                if (document.body.classList.contains('light-mode')) {
                    localStorage.setItem('theme', 'light');
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                } else {
                    localStorage.setItem('theme', 'dark');
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
            });
        }
    
        // Language Toggle
        function setupLanguageToggle() {
            englishBtn.addEventListener('click', () => {
                if (!isEnglish) {
                    isEnglish = true;
                    englishBtn.classList.add('active');
                    urduBtn.classList.remove('active');
                    userInput.placeholder = "Describe your symptoms here...";
                    symptomSearch.placeholder = "Search symptoms...";
                    
                    if (chatMessages.children.length === 1) {
                        chatMessages.innerHTML = '';
                        addBotMessage("Hello! I'm your AI Doctor. Please describe your symptoms in detail, and I'll help diagnose your condition and recommend appropriate treatment. You can also select symptoms from the list above.");
                    }
                    
                    // Update symptoms in English
                    populateSymptoms();
                }
            });
    
            urduBtn.addEventListener('click', () => {
                if (isEnglish) {
                    isEnglish = false;
                    englishBtn.classList.remove('active');
                    urduBtn.classList.add('active');
                    userInput.placeholder = "اپنی علامات یہاں بیان کریں...";
                    symptomSearch.placeholder = "علامات تلاش کریں...";
                    
                    if (chatMessages.children.length === 1) {
                        chatMessages.innerHTML = '';
                        addBotMessage("ہیلو! میں آپ کا AI ڈاکٹر ہوں۔ براہ کرم اپنی علامات کو تفصیل سے بیان کریں، اور میں آپ کی حالت کی تشخیص کرنے اور مناسب علاج کی سفارش کرنے میں مدد کروں گا۔ آپ اوپر دی گئی فہرست سے علامات کا انتخاب بھی کر سکتے ہیں۔");
                    }
                    
                    // Update symptoms in Urdu
                    populateSymptoms();
                }
            });
        }
    
        // Populate Symptoms
        function populateSymptoms() {
            symptomsGrid.innerHTML = '';
            
            const englishSymptoms = [
                "Fever", "Headache", "Cough", "Sore throat", "Fatigue",
                "Nausea", "Vomiting", "Diarrhea", "Dizziness", "Shortness of breath",
                "Chest pain", "Muscle pain", "Joint pain", "Rash", "Itching",
                "Runny nose", "Sneezing", "Congestion", "Loss of taste", "Loss of smell",
                "Abdominal pain", "Heartburn", "Constipation", "Blurred vision", "Back pain"
            ];
            
            const urduSymptoms = [
                "بخار", "سر درد", "کھانسی", "گلے کی خراش", "تھکاوٹ",
                "متلی", "الٹی", "اسہال", "چکر آنا", "سانس لینے میں دشواری",
                "سینے میں درد", "پٹھوں میں درد", "جوڑوں کا درد", "خارش", "کھجلی",
                "ناک بہنا", "چھینکیں آنا", "ناک بند ہونا", "ذائقہ ختم ہونا", "سونگھنے کی حس ختم ہونا",
                "پیٹ میں درد", "سینے کی جلن", "قبض", "دھندلا نظر آنا", "کمر درد"
            ];
            
            allSymptoms = isEnglish ? englishSymptoms : urduSymptoms;
            
            allSymptoms.forEach(symptom => {
                const symptomElement = document.createElement('div');
                symptomElement.classList.add('symptom-tag');
                symptomElement.textContent = symptom;
                
                symptomElement.addEventListener('click', () => {
                    symptomElement.classList.toggle('selected');
                    
                    const symptomIndex = selectedSymptoms.indexOf(symptom);
                    if (symptomIndex === -1) {
                        selectedSymptoms.push(symptom);
                    } else {
                        selectedSymptoms.splice(symptomIndex, 1);
                    }
                    
                    userInput.placeholder = isEnglish ? 
                        selectedSymptoms.length > 0 ? 
                            `Describe your symptoms (selected: ${selectedSymptoms.join(', ')})...` : 
                            "Describe your symptoms here..." :
                        selectedSymptoms.length > 0 ? 
                            `اپنی علامات بیان کریں (منتخب شدہ: ${selectedSymptoms.join('، ')})...` : 
                            "اپنی علامات یہاں بیان کریں...";
                });
                
                symptomsGrid.appendChild(symptomElement);
            });
        }
    
        // Chat Setup
        function setupChat() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
    
                recognition.onstart = () => {
                    isListening = true;
                    voiceBtn.classList.add('listening');
                };
    
                recognition.onend = () => {
                    isListening = false;
                    voiceBtn.classList.remove('listening');
                };
    
                recognition.onresult = (event) => {
                    userInput.value = event.results[0][0].transcript;
                };
    
                voiceBtn.addEventListener('click', () => {
                    if (isListening) {
                        recognition.stop();
                    } else {
                        recognition.lang = isEnglish ? 'en-US' : 'ur-PK';
                        recognition.start();
                    }
                });
            } else {
                voiceBtn.style.display = 'none';
            }
    
            function sendMessage() {
                const message = userInput.value.trim();
                if (message) {
                    addUserMessage(message);
                    userInput.value = '';
                    showTypingIndicator();
                    
                    setTimeout(() => {
                        removeTypingIndicator();
                        processUserMessage(message);
                    }, 1500);
                }
            }
    
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
        }
    
        // Chat Functions
        function addUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', 'user-message');
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    
        function addBotMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', 'bot-message');
            
            if (text.includes('##') || text.includes('###') || text.includes('---')) {
                messageDiv.innerHTML = text
                    .replace(/### (.*?)\n/g, '<h3>$1</h3>')
                    .replace(/## (.*?)\n/g, '<h2>$1</h2>')
                    .replace(/---/g, '<hr>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/\n/g, '<br>');
            } else {
                messageDiv.textContent = text;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('typing-indicator');
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) typingIndicator.remove();
        }
    
        // Process Messages
        async function processUserMessage(message) {
            try {
                let prompt = isEnglish ? 
                    `Act as a medical doctor. The patient reports: "${message}"${selectedSymptoms.length > 0 ? ` with these symptoms: ${selectedSymptoms.join(', ')}.` : '.'}
                    Provide:
                    1. Possible conditions (most likely first) with confidence percentage
                    2. Recommended medications with exact dosages, frequency, purpose, and warnings
                    3. Precautionary measures
                    4. When to see a doctor
                    Format with clear headings. Don't include any disclaimers.` :
                    `ایک ڈاکٹر کی حیثیت سے جواب دیں۔ مریض کا کہنا ہے: "${message}"${selectedSymptoms.length > 0 ? ` اور ان علامات کی شکایت ہے: ${selectedSymptoms.join('، ')}.` : '.'}
                    فراہم کریں:
                    1. ممکنہ حالات (سب سے ممکنہ پہلے) اعتماد کی فیصد کے ساتھ
                    2. تجویز کردہ ادویات، صحیح خوراکیں، تعدد، مقصد اور انتباہات
                    3. احتیاطی تدابیر
                    4. ڈاکٹر سے کب ملیں
                    واضح سرخیوں کے ساتھ جواب دیں۔ کوئی ڈس کلیمر شامل نہ کریں۔`;
                
                const response = await callGeminiAPI(prompt);
                
                if (response) {
                    // Remove any disclaimer text
                    let cleanedResponse = response.replace(/میں ایک طبی پیشہ ور نہیں ہوں، اس لیے براہ کرم اس معلومات کو طبی مشورے کے طور پر مت سمجھیں۔/g, '')
                                                 .replace(/I am not a medical professional.*?medical advice./g, '');
                    
                    addBotMessage(cleanedResponse);
                    
                    // Add our disclaimer at the end
                    addBotMessage(isEnglish ? 
                        "Note: This is an AI assistant. For professional medical advice, please consult a doctor." :
                        "نوٹ: یہ ایک AI معاون ہے۔ پیشہ ورانہ طبی مشورے کے لیے براہ کرم ڈاکٹر سے رجوع کریں۔");
                    
                    updateDiagnosisResults(cleanedResponse);
                } else {
                    // Fallback to simple medicine recommendations if API fails
                    const fallbackResponse = generateFallbackResponse(message);
                    addBotMessage(fallbackResponse);
                    updateDiagnosisResults(fallbackResponse);
                }
                
                selectedSymptoms = [];
                document.querySelectorAll('.symptom-tag.selected').forEach(tag => {
                    tag.classList.remove('selected');
                });
                userInput.placeholder = isEnglish ? 
                    "Describe your symptoms here..." : 
                    "اپنی علامات یہاں بیان کریں...";
            } catch (error) {
                console.error('Error:', error);
                addBotMessage(isEnglish ? 
                    "Sorry, I encountered an error. Please try again." : 
                    "معذرت، ایک خرابی پیش آئی۔ براہ کرم دوبارہ کوشش کریں۔");
            }
        }
    
        // Call Gemini API
        async function callGeminiAPI(prompt) {
            const apiKey = "AIzaSyByU0KAsZzwlNHXffGIdAkSSr02XAs5LJI";
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });
                
                const data = await response.json();
                
                if (data.candidates && data.candidates[0]?.content?.parts) {
                    return data.candidates[0].content.parts[0].text;
                }
                throw new Error('Unexpected API response structure');
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
        }
        
        // Generate fallback response when API fails
        function generateFallbackResponse(message) {
            const lowerMessage = message.toLowerCase();
            let conditions = [];
            let medicines = [];
            let precautions = [];
            
            // Check for common conditions
            if (lowerMessage.includes('cold') || lowerMessage.includes('sardi') || 
                lowerMessage.includes('cough') || lowerMessage.includes('khansi') || 
                lowerMessage.includes('fever') || lowerMessage.includes('bukhar')) {
                conditions.push(isEnglish ? "Common Cold (80% confidence)" : "عام نزلہ زکام (80% اعتماد)");
                medicines = [...commonMedicines["cold"], ...commonMedicines["cough"]];
                precautions = isEnglish ? [
                    "Get plenty of rest",
                    "Drink warm fluids like tea or soup",
                    "Use a humidifier to ease congestion",
                    "Wash hands frequently to prevent spread"
                ] : [
                    "کافی آرام کریں",
                    "گرم مشروبات جیسے چائے یا سوپ پیئیں",
                    "گاڑھے بلغم کو کم کرنے کے لیے ہیومیڈیفائر استعمال کریں",
                    "جراثیم کے پھیلاؤ کو روکنے کے لیے ہاتھ دھوئیں"
                ];
            }
            
            if (lowerMessage.includes('headache') || lowerMessage.includes('sardard')) {
                conditions.push(isEnglish ? "Tension Headache (75% confidence)" : "تناؤ کا سر درد (75% اعتماد)");
                medicines.push({
                    name: "Paracetamol",
                    dose: isEnglish ? "500mg" : "500 ملی گرام",
                    frequency: isEnglish ? "Every 6-8 hours" : "ہر 6-8 گھنٹے بعد",
                    purpose: isEnglish ? "Pain relief" : "درد سے نجات",
                    warning: isEnglish ? "Do not exceed 4 doses in 24 hours" : "24 گھنٹے میں 4 خوراکوں سے زیادہ نہ لیں"
                });
                precautions.push(
                    isEnglish ? "Apply a cold compress to forehead" : "پیشانی پر ٹھنڈا کمپریس لگائیں",
                    isEnglish ? "Practice relaxation techniques" : "آرام کی تکنیکوں پر عمل کریں",
                    isEnglish ? "Ensure proper hydration" : "مناسب مقدار میں پانی پئیں"
                );
            }
            
            if (lowerMessage.includes('diarrhea') || lowerMessage.includes('ishal') || lowerMessage.includes('اسہال')) {
                conditions.push(isEnglish ? "Acute Diarrhea (70% confidence)" : "شدید اسہال (70% اعتماد)");
                medicines.push({
                    name: isEnglish ? "Oral Rehydration Solution" : "او آر ایس",
                    dose: isEnglish ? "As needed" : "ضرورت کے مطابق",
                    frequency: isEnglish ? "After each loose stool" : "ہر ڈھیلے پاخانے کے بعد",
                    purpose: isEnglish ? "Prevent dehydration" : "پانی کی کمی کو روکیں",
                    warning: isEnglish ? "Continue even if vomiting occurs" : "الٹی ہونے کی صورت میں بھی جاری رکھیں"
                });
                precautions.push(
                    isEnglish ? "Drink plenty of fluids" : "کافی مقدار میں سیال پیئیں",
                    isEnglish ? "Avoid dairy products" : "دودھ کی مصنوعات سے پرہیز کریں",
                    isEnglish ? "Eat bland foods like bananas, rice" : "ہلکی پھلکی غذائیں جیسے کیلے، چاول کھائیں"
                );
            }
            
            if (conditions.length === 0) {
                conditions.push(isEnglish ? "Unable to determine specific condition" : "مخصوص حالت کا تعین نہیں کیا جا سکا");
                precautions.push(isEnglish ? "Please describe your symptoms in more detail" : "براہ کرم اپنی علامات کو مزید تفصیل سے بیان کریں");
            }
            
            // Format the response
            return isEnglish ? 
                `### Possible Conditions\n${conditions.join('\n')}\n\n### Recommended Medicine\n${
                    medicines.map(med => `- ${med.name} (${med.dose}), ${med.frequency} - ${med.purpose}. ${med.warning}`).join('\n')
                }\n\n### Precautions\n${precautions.map(p => `- ${p}`).join('\n')}` :
                `### ممکنہ حالات\n${conditions.join('\n')}\n\n### تجویز کردہ ادویات\n${
                    medicines.map(med => `- ${med.name} (${med.dose})، ${med.frequency} - ${med.purpose}. ${med.warning}`).join('\n')
                }\n\n### احتیاطی تدابیر\n${precautions.map(p => `- ${p}`).join('\n')}`;
        }
    
        // Update Diagnosis Results
        function updateDiagnosisResults(response) {
            const result = extractStructuredData(response, isEnglish);
            
            // Update diagnosis
            if (result.diagnosis) {
                diagnosisResult.innerHTML = result.diagnosis
                    .split('\n')
                    .map(line => {
                        if (line.includes('%')) {
                            const [condition, confidence] = line.split('(');
                            return `
                                <div class="diagnosis-item">
                                    <div class="diagnosis-name">${condition.trim()}</div>
                                    <div class="diagnosis-confidence">${confidence ? '(' + confidence : ''}</div>
                                </div>
                            `;
                        }
                        return `<div>${line}</div>`;
                    })
                    .join('');
            } else {
                diagnosisResult.innerHTML = isEnglish ? "No specific diagnosis" : "کوئی مخصوص تشخیص نہیں";
            }
            
            // Update confidence meter if available
            if (result.confidence) {
                confidenceMeter.style.display = 'block';
                confidenceFill.style.width = `${result.confidence}%`;
                confidenceValue.textContent = `${result.confidence}% ${isEnglish ? 'confidence' : 'اعتماد'}`;
            } else {
                confidenceMeter.style.display = 'none';
            }
            
            // Update medicines
            if (result.medicines && result.medicines.length > 0) {
                medicineResult.innerHTML = result.medicines.map(med => `
                    <div class="medicine-item">
                        <div class="medicine-name">${med.name}</div>
                        <div class="medicine-details">
                            ${med.dose ? `<div><strong>${isEnglish ? 'Dose' : 'خوراک'}:</strong> ${med.dose}</div>` : ''}
                            ${med.frequency ? `<div><strong>${isEnglish ? 'Frequency' : 'تعدد'}:</strong> ${med.frequency}</div>` : ''}
                            ${med.purpose ? `<div><strong>${isEnglish ? 'Purpose' : 'مقصد'}:</strong> ${med.purpose}</div>` : ''}
                            ${med.warning ? `<div class="medicine-warning"><i class="fas fa-exclamation-triangle"></i><span><strong>${isEnglish ? 'Warning' : 'انتباہ'}:</strong> ${med.warning}</span></div>` : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                medicineResult.innerHTML = isEnglish ? 
                    "No specific medication recommended" : 
                    "کوئی مخصوص دوا کی سفارش نہیں";
            }
            
            // Update precautions
            precautionsResult.innerHTML = result.precautions?.map(p => `
                <div class="precaution-item">${p}</div>
            `).join('') || (isEnglish ? "No specific precautions" : "کوئی مخصوص احتیاط نہیں");
        }
    
        // Extract Structured Data
        function extractStructuredData(response, isEnglish) {
            const result = {
                diagnosis: '',
                confidence: 0,
                medicines: [],
                precautions: []
            };
            
            // Extract diagnosis with confidence
            const diagnosisMatch = response.match(/(?:1\..*?\n|##.*?\n)(.*?)(?:\n\n|\n##|\n###|$)/s);
            if (diagnosisMatch) {
                result.diagnosis = diagnosisMatch[1].trim();
                
                // Try to extract confidence percentage
                const confidenceMatch = result.diagnosis.match(/(\d+)%/);
                if (confidenceMatch) {
                    result.confidence = parseInt(confidenceMatch[1]);
                }
            }
            
            // Extract medicines
            const medicineSection = response.match(/(?:2\..*?\n|###.*?\n)(.*?)(?:\n\n|\n##|\n###|$)/s);
            if (medicineSection) {
                const medicineLines = medicineSection[1].split('\n').filter(line => line.trim());
                
                medicineLines.forEach(line => {
                    const lineText = line.replace(/^-\s*/, '').trim();
                    const medMatch = lineText.match(/(.*?)\s*(?:\(?(dose|خوراک)[:\s]*(.*?)\)?(?:,\s*(frequency|تعدد)[:\s]*(.*?))?(?:,\s*(purpose|مقصد)[:\s]*(.*?))?(?:,\s*(warning|انتباہ)[:\s]*(.*?))?)?/i);
                    
                    if (medMatch) {
                        const medicine = {
                            name: medMatch[1].trim(),
                            dose: medMatch[3]?.trim() || '',
                            frequency: medMatch[5]?.trim() || '',
                            purpose: medMatch[7]?.trim() || '',
                            warning: medMatch[9]?.trim() || ''
                        };
                        result.medicines.push(medicine);
                    }
                });
            }
            
            // Extract precautions
            const precautionsSection = response.match(/(?:3\..*?\n|###.*?\n)(.*?)(?:\n\n|\n##|\n###|$)/s);
            if (precautionsSection) {
                result.precautions = precautionsSection[1].split('\n')
                    .filter(line => line.trim())
                    .map(line => line.replace(/^\s*[-*]\s*/, '').trim());
            }
            
            return result;
        }
    
        // Initialize
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>